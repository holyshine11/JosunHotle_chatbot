# 조선호텔 챗봇 정책 설정
# - 금지 주제, 개인정보 규칙, 답변 템플릿 정의
# - RAG 시스템에서 정책 필터링에 사용

version: "1.0"
updated_at: "2026-02-04"

# ============================================================
# 호텔 정보
# ============================================================
hotels:
  josun_palace:
    name: "조선 팰리스"
    phone: "02-727-7200"
    email: "rsvn@josunpalace.com"
    address: "서울 강남구 테헤란로 231"
    website: "https://jpg.josunhotel.com"

  grand_josun_busan:
    name: "그랜드 조선 부산"
    phone: "051-922-5000"
    email: "busan@grandjosun.com"
    address: "부산 해운대구 해운대해변로 292"
    website: "https://gjb.josunhotel.com"

  grand_josun_jeju:
    name: "그랜드 조선 제주"
    phone: "064-735-8000"
    email: "jeju@grandjosun.com"
    address: "제주특별자치도 서귀포시"
    website: "https://gjj.josunhotel.com"

  lescape:
    name: "레스케이프"
    phone: "02-317-4000"
    email: "contact@lescapehotel.com"
    address: "서울 중구 퇴계로 67"
    website: "https://les.josunhotel.com"

  gravity_pangyo:
    name: "그래비티 판교"
    phone: "031-539-4800"
    email: "reservation@gravityhotel.com"
    address: "경기도 성남시 분당구"
    website: "https://grp.josunhotel.com"

# ============================================================
# 금지 키워드 (개인정보)
# ============================================================
forbidden_keywords:
  personal_info:
    - "예약번호"
    - "예약 번호"
    - "confirmation number"
    - "booking number"
    - "카드번호"
    - "카드 번호"
    - "card number"
    - "비밀번호"
    - "password"
    - "주민등록번호"
    - "주민번호"
    - "여권번호"
    - "여권 번호"
    - "passport"
    - "계좌번호"
    - "계좌 번호"
    - "account number"
    - "신용카드"
    - "credit card"
    - "전화번호 알려"
    - "연락처 알려"

  payment_action:
    - "결제해"
    - "결제 해"
    - "pay for"
    - "송금"
    - "이체"
    - "transfer money"

  inappropriate:
    - "욕설"  # 실제 욕설 키워드는 별도 관리
    - "비속어"

# ============================================================
# 금지 주제
# ============================================================
forbidden_topics:
  - category: "개인정보 요청"
    description: "예약번호, 카드번호 등 개인정보 입력 요구"
    response_template: "personal_info_block"

  - category: "결제 처리"
    description: "결제, 환불 직접 처리 요청"
    response_template: "payment_redirect"

  - category: "의료/법률"
    description: "의료 상담, 법률 자문 요청"
    response_template: "out_of_scope"

  - category: "타 호텔 비교"
    description: "다른 호텔과의 비교 요청"
    response_template: "comparison_block"

  - category: "가격 협상"
    description: "가격 할인, 특별 요금 요청"
    response_template: "price_redirect"

# ============================================================
# 답변 템플릿
# ============================================================
response_templates:
  # 정상 답변 (근거 있음)
  normal:
    prefix: ""
    suffix: ""
    include_source: true
    include_updated_at: true

  # 근거 부족
  no_evidence:
    message: |
      죄송합니다, 현재 데이터로는 해당 정보를 확인하기 어렵습니다.
      호텔에 직접 문의해 주세요: {hotel_phone}
    include_hotel_contact: true

  # 호텔 미지정
  hotel_not_specified:
    message: |
      어느 호텔에 대해 문의하시나요?
      - 조선 팰리스 (서울 강남)
      - 그랜드 조선 부산
      - 그랜드 조선 제주
      - 레스케이프 (서울 명동)
      - 그래비티 판교

  # 개인정보 차단
  personal_info_block:
    message: |
      개인정보(예약번호, 카드번호 등)는 챗봇에서 처리할 수 없습니다.
      호텔 고객센터로 직접 문의해 주세요: {hotel_phone}
    severity: "block"

  # 결제 관련 리다이렉트
  payment_redirect:
    message: |
      결제 및 환불 관련 문의는 호텔 고객센터 또는 공식 웹사이트를 이용해 주세요.
      - 고객센터: {hotel_phone}
      - 웹사이트: {hotel_website}
    severity: "redirect"

  # 범위 밖 주제
  out_of_scope:
    message: |
      죄송합니다, 해당 문의는 호텔 FAQ 챗봇의 범위를 벗어납니다.
      호텔 시설, 예약, 정책 관련 문의를 도와드릴 수 있습니다.
    severity: "info"

  # 타 호텔 비교 차단
  comparison_block:
    message: |
      다른 호텔과의 비교는 제공하지 않습니다.
      특정 호텔에 대해 궁금하신 점을 질문해 주세요.
    severity: "info"

  # 가격 협상 리다이렉트
  price_redirect:
    message: |
      객실 요금 및 프로모션 관련 문의는 호텔 예약팀으로 연락해 주세요.
      - 예약 문의: {hotel_phone}
      - 공식 예약: {hotel_website}
    severity: "redirect"

  # 에러 발생
  error:
    message: |
      죄송합니다, 일시적인 오류가 발생했습니다.
      잠시 후 다시 시도해 주세요.
    severity: "error"

# ============================================================
# 근거 검증 설정
# ============================================================
evidence_gate:
  # 최소 유사도 점수 (0~1)
  min_score: 0.5

  # 최소 필요 청크 수
  min_chunks: 1

  # 점수별 신뢰도 레벨
  confidence_levels:
    high: 0.8      # 높은 신뢰도
    medium: 0.6    # 중간 신뢰도
    low: 0.5       # 낮은 신뢰도 (임계값)

# ============================================================
# 톤 & 스타일
# ============================================================
tone:
  style: "polite"           # polite, casual, formal
  language: "ko"            # 기본 언어
  use_honorific: true       # 존댓말 사용
  max_length: 500           # 최대 답변 길이 (자)

# ============================================================
# 카테고리별 특수 규칙
# ============================================================
category_rules:
  "환불/취소":
    always_include_updated_at: true
    warning: "취소/환불 정책은 예약 시점에 따라 다를 수 있습니다."

  "가격/요금":
    always_include_updated_at: true
    warning: "요금은 시즌 및 프로모션에 따라 변동될 수 있습니다."

  "운영시간":
    always_include_updated_at: true
    warning: "운영시간은 변경될 수 있으니 방문 전 확인해 주세요."

# ============================================================
# 로깅 설정
# ============================================================
logging:
  enabled: true
  log_queries: true
  log_responses: true
  log_scores: true
  retention_days: 90
